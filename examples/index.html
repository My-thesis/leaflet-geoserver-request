<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    />

    <title>L.Geoserver</title>

    <style>
      #map {
        width: 100%;
        height: 50vh;
      }
    </style>
  </head>
  <body>
    <h1>Leaflet L.GeoServer Plugin</h1>
    <div id="map"></div>
    <a href="https://github.com/iamtekson/l.geoserver"
      ><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 1000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a></a>
    <h2>Wms Image</h2>
    <img src="" alt="this is image" srcset="" id="wmsImage" />
  </body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
<script src="../src/L.Geoserver.js"></script>

<script>
  var map = L.map("map").setView([38.861, 71.2761], 7);
  var osmLayer = L.tileLayer(
    "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
    {
      maxZoom: 19,
      attribution:
        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    }
  ).addTo(map);

  //wms
  var wms = L.Geoserver.wms("http://203.159.29.40:8080/geoserver/wms", {
    layers: `tajikistan:EAR_Road`,
  });
  wms.addTo(map);

  //wfs
  var wfs = L.Geoserver.wfs("http://203.159.29.40:8080/geoserver/wms", {
    layers: `tajikistan:jamoat`,
    style: {
      color: "red",
      fillOpacity: 0,
      opacity: 1,
    },
    onEachFeature: function (feature, layer) {
      layer.bindPopup("popup text");
    },
    CQL_FILTER: `name_rg=='DRS'`,
  });
  wfs.addTo(map);

  //legend
  var legend = L.Geoserver.legend("http://203.159.29.40:8080/geoserver/wms", {
    layers: `tajikistan:jamoat`,
    style: `tajikistan:region`,
  });
  legend.addTo(map);

  //wmsImage
  var wmsImage = L.Geoserver.wmsImage(
    "http://203.159.29.40:8080/geoserver/tajikistan/wms",
    {
      wmsLayers: [
        "tajikistan:jamoat",
        "tajikistan:EAR_Agriculture",
        "tajikistan:jamoat",
      ],
      wmsCQL_FILTER: ["district_eng=='Ayni'", "tajikistan:jamoat", "INCLUDE"],
      wmsStyle: [
        "tajikistan:cql_boundary",
        "tajikistan:EAR_Agriculture",
        "tajikistan:cql_boundary",
      ],
      format: "image/png",
      wmsId: "wmsImage",
      width: 300,
      height: 300,
      transparent: true,
    }
  );
</script>
